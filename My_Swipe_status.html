<!DOCTYPE HTML>
<html>
    <head>  
        <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
        
        <link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/css/bootstrap-combined.min.css" rel="stylesheet">
        <link href="http://twitter.github.com/bootstrap/assets/js/google-code-prettify/prettify.css" rel="stylesheet" />
        <link href="css/main.css" type="text/css" rel="stylesheet" />
        
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
        <script type="text/javascript" src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js"></script>
        <script type="text/javascript" src="jquery.touchSwipe.min.js"></script>
        <script type="text/javascript" src="js/main.js"></script>
        
        <title>touchSwipe</title>

        <style>

            ul {
               list-style:none;
               margin: 0;
            }

            .test-wrappers {
                position: relative;
                height: 350px;
            }

            .test1-wrapper,
            .test2-wrapper,
            .test3-wrapper,
            .test4-wrapper,
            .test5-wrapper
            {
                position: absolute;
            }

            .test1-wrapper {
                z-index: 1000;
            }

            .test2-wrapper {
                z-index: 900;
            }

            
            .test3-wrapper {
                z-index: 800;
            }
            

            .test4-wrapper {
                z-index: 700;
            }

            .test5-wrapper {
                z-index: 600;
            }

            .test-layer {
                overflow: hidden;
                height: 100%;
                position: absolute;
                width: 100%;
                top: 0;
                left: 0;
            }

            .like {

            }

            .dont-like {
                
            }

            .like-or-not > * {
            }

            .like-or-not > ul li {
                width: 50%;
                float: left;
            }

        </style>

    </head>
    <body>
		<div class="container">
			
			<script id='code_1'>

                var tag = document.createElement('script');

                tag.src = "https://www.youtube.com/iframe_api";
                var firstScriptTag = document.getElementsByTagName('script')[0];
                firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

                var player;
                var player2;
                var player3;
                var player4;

                var videoIds = [
                    'QZ1poicuB2s',
                    'VZKMaFR2mtU',
                    'u7z9M0vFPbI', 
                    'L_QVB4Qdh6o', 
                    'I55sHty3h6I'
                ]

                function onYouTubeIframeAPIReady() {
                  player = new YT.Player('test1', {
                    height: '315',
                    width: '100%',
                    videoId: videoIds[0],
                    events: {
                      'onReady': onPlayerReady,
                      'onStateChange': onPlayerStateChange
                    }
                  });

                  player2 = new YT.Player('test2', {
                    height: '315',
                    width: '100%',
                    videoId: videoIds[1],
                    events: {
                      'onReady': onPlayerReady,
                      'onStateChange': onPlayerStateChange
                    }
                  });


                  player3 = new YT.Player('test3', {
                    height: '315',
                    width: '100%',
                    videoId: videoIds[2],
                    events: {
                      'onReady': onPlayerReady,
                      'onStateChange': onPlayerStateChange
                    }
                  });

                  player4 = new YT.Player('test4', {
                    height: '315',
                    width: '100%',
                    videoId: videoIds[3],
                    events: {
                      'onReady': onPlayerReady,
                      'onStateChange': onPlayerStateChange
                    }
                  });

                  player5 = new YT.Player('test5', {
                    height: '315',
                    width: '100%',
                    videoId: videoIds[4],
                    events: {
                      'onReady': onPlayerReady,
                      'onStateChange': onPlayerStateChange
                    }
                  });


                }

                function onPlayerReady () {

                }

                function onPlayerStateChange () {

                }

                
				$(function() {			

                    var likeSwipeCount = 1;
                    var notLikeSwipeCount = 1;

					//Enable swiping...
					$(".test-layer").swipe( {
						swipeStatus:function(event, phase, direction, distance, duration, fingers)
						{

                            // 左右のスワイプ
							if (direction === 'right') {
                                $(this).prev().css('transform', 'translateX('+ distance +'%) rotate('+ distance +'deg)');
                            } else {
                                $(this).prev().css('transform', 'translateX('+ -1*distance +'%) rotate('+ -1*distance +'deg)');
                            }

							//Here we can check the:
							//phase : 'start', 'move', 'end', 'cancel'
							//direction : 'left', 'right', 'up', 'down'
							//distance : Distance finger is from initial touch point in px
							//duration : Length of swipe in MS 
							//fingerCount : the number of fingers used

                            // スワイプが大きいなら動画を消す
							if (phase!="cancel" && phase!="end") {

                                if (distance<30) {

                                } else {

                                    // 次の動画の再生
                                    $(this).parent().next().mousedown();

                                    $(this).prev().fadeOut("slow", function () {
                                        // 左右のスワイプ回数カウント
                                        if (direction === 'right') {
                                            $(".like span").text(likeSwipeCount++);
                                        } else {
                                            $(".dont-like span").text(notLikeSwipeCount++);
                                        }

                                        $(this).remove();
                                    });

                                }
							}
							
						},
						threshold:200,
						maxTimeThreshold:5000,
						fingers:'all'
					});

                    $(".test1-wrapper").on("mousedown", function () {
                        $(this).find('.box').css('background-color', 'red');
                        player.playVideo();
                    });

                    $(".test2-wrapper").on("mousedown", function () {
                        $(this).find('.box').css('background-color', 'red');
                        player2.playVideo();
                    });

                    $(".test3-wrapper").on("mousedown", function () {
                        $(this).find('.box').css('background-color', 'red');
                        player3.playVideo();
                    });

                    $(".test4-wrapper").on("mousedown", function () {
                        $(this).find('.box').css('background-color', 'red');
                        player4.playVideo();
                    });

                    $(".test5-wrapper").on("mousedown", function () {
                        $(this).find('.box').css('background-color', 'red');
                        player5.playVideo();
                    });

				});
			</script>
			
			<div class="test-wrappers">
                <div class="test1-wrapper">
                    <div id="test1" class="box">
                    </div>
                    <div class="test-layer">
                    </div>
                </div>

                <div class="test2-wrapper">
                    <div id="test2" class="box">
                    </div>
                    <div class="test-layer">
                    </div>
                </div>

                <div class="test3-wrapper">
                    <div id="test3" class="box">
                    </div>
                    <div class="test-layer">
                    </div>
                </div>

                <div class="test4-wrapper">
                    <div id="test4" class="box">
                    </div>
                    <div class="test-layer">
                    </div>
                </div>

                <div class="test5-wrapper">
                    <div id="test5" class="box">
                    </div>
                    <div class="test-layer">
                    </div>
                </div>

                
            </div>

            <div class="like-or-not">
                <ul>
                    <li class="like">like: <span>0</span></li>
                    <li class="dont-like">not like: <span>0</span></li>
                </ul>
            </div>

		</div>
   </body>
</html>
